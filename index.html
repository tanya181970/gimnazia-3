<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ–∏–≤–∞—è –¥–æ—Å–∫–∞ —Ö–∞–Ω–æ–≤ ‚Äî –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: radial-gradient(circle, #0f172a 0%, #020617 100%);
            color: white;
            overflow: hidden; 
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 1.5rem;
            flex: 1;
            min-height: 0; 
            padding: 0 1.5rem 1.5rem 1.5rem;
        }

        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 10px;
        }

        .drop-zone {
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            min-height: 240px;
        }

        .drop-zone.drag-over {
            background-color: rgba(251, 191, 36, 0.1);
            border-color: #fbbf24;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.1);
        }

        .draggable {
            cursor: grab;
            transition: transform 0.1s, background 0.2s;
            touch-action: none;
        }

        .fact-card {
            background: #1e293b;
            border-left: 4px solid transparent;
        }
        
        .fact-card[data-type="date"] { border-left-color: #60a5fa; }
        .fact-card[data-type="ext"] { border-left-color: #f87171; }
        .fact-card[data-type="law"] { border-left-color: #10b981; }

        .slot-placeholder {
            border: 1px dashed rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.25);
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            height: 40px;
            background: rgba(0,0,0,0.1);
        }

        .correct-drop {
            animation: bounceIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            background: #0f172a;
            border: 1px solid #10b981;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .category-header {
            position: sticky;
            top: 0;
            background: #0f172a;
            z-index: 20;
            padding: 8px 0;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>

    <header class="h-[80px] flex flex-col justify-center items-center shrink-0">
        <h1 class="text-2xl md:text-3xl font-bold text-yellow-500 uppercase tracking-widest">–ñ–∏–≤–∞—è –¥–æ—Å–∫–∞ —Ö–∞–Ω–æ–≤</h1>
        <p class="text-gray-400 text-xs italic tracking-wide">–¶–µ–ª–∏ —É—Ä–æ–∫–∞: 10.3.1.2, 10.3.3.3 (–°—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)</p>
    </header>

    <div class="main-layout">
        
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ë–∞–Ω–∫ —Ñ–∞–∫—Ç–æ–≤ -->
        <aside class="bg-slate-900/60 rounded-2xl p-4 border border-slate-800 flex flex-col min-h-0">
            <h2 class="text-sm font-black mb-4 text-center text-slate-400 tracking-widest uppercase">üì¶ –ë–∞–Ω–∫ —Ñ–∞–∫—Ç–æ–≤</h2>
            
            <div id="fact-bank" class="flex-1 overflow-y-auto custom-scroll pr-2">
                
                <div class="mb-6">
                    <div class="category-header text-[10px] text-blue-400 font-black uppercase">üìÖ –î–∞—Ç—ã –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="space-y-2">
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="date" data-id="date-kassym">1511‚Äì1521 –≥–≥.</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="date" data-id="date-hakhnazar">1538‚Äì1580 –≥–≥.</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="date" data-id="date-tauelkel">1582‚Äì1598 –≥–≥.</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="date" data-id="date-esim">1598‚Äì1628 –≥–≥.</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="date" data-id="date-zhan">1628‚Äì1652 –≥–≥.</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="date" data-id="date-tauke">1680‚Äì1715 –≥–≥.</div>
                    </div>
                </div>

                <div class="mb-6">
                    <div class="category-header text-[10px] text-red-400 font-black uppercase">‚öîÔ∏è –í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="space-y-2">
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="ext" data-id="ext-kassym">–î–∏–ø–ª–æ–º–∞—Ç–∏—è —Å –ú–æ—Å–∫–≤–æ–π</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="ext" data-id="ext-hakh">–°–æ—é–∑ —Å –ë—É—Ö–∞—Ä—Å–∫–∏–º —Ö–∞–Ω—Å—Ç–≤–æ–º</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="ext" data-id="ext-tauelkel">–ö–ª—è—Ç–≤–∞ –≤–µ—Ä–Ω–æ—Å—Ç–∏ —Å –†–æ—Å—Å–∏–µ–π (1594)</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="ext" data-id="ext-esim">–í–∑—è—Ç–∏–µ –¢–∞—à–∫–µ–Ω—Ç–∞</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="ext" data-id="ext-zhan">–û—Ä–±—É–ª–∞–∫—Å–∫–∞—è –±–∏—Ç–≤–∞</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="ext" data-id="ext-tauke">–ê–Ω—Ç–∏–¥–∂—É–Ω–≥–∞—Ä—Å–∫–∏–π –∫—É—Ä—É–ª—Ç–∞–π</div>
                    </div>
                </div>

                <div class="mb-6">
                    <div class="category-header text-[10px] text-emerald-400 font-black uppercase">üìú –ó–∞–∫–æ–Ω—ã –∏ –†–µ—Ñ–æ—Ä–º—ã</div>
                    <div class="space-y-2">
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="law" data-id="law-kassym">¬´“ö–∞—Å“õ–∞ –∂–æ–ª—ã¬ª</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="law" data-id="law-hakh">–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ –µ–¥–∏–Ω—Å—Ç–≤–∞</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="law" data-id="law-tauelkel">–û—Ç–≤–æ–µ–≤–∞–Ω–∏–µ –ø—Ä–∏—Å—ã—Ä–¥–∞—Ä—å–∏–Ω—Å–∫–∏—Ö –≥–æ—Ä–æ–¥–æ–≤</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="law" data-id="law-esim">¬´–ï—Å–∫—ñ –∂–æ–ª—ã¬ª</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="law" data-id="law-zhan">–ü—Ä–æ–∑–≤–∏—â–µ ¬´–°–∞–ª–∫–∞–º¬ª</div>
                        <div class="draggable fact-card p-3 rounded-lg shadow text-sm" draggable="true" data-type="law" data-id="law-tauke">¬´–ñ–µ—Ç—ñ –ñ–∞—Ä“ì—ã¬ª</div>
                    </div>
                </div>
            </div>
            
            <button onclick="location.reload()" class="mt-4 py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl transition text-xs font-bold uppercase tracking-widest shrink-0">
                üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
            </button>
        </aside>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –°–µ—Ç–∫–∞ —Ö–∞–Ω–æ–≤ -->
        <main class="overflow-y-auto custom-scroll pr-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 content-start pb-10">
            
            <!-- –ö–∞—Å—ã–º —Ö–∞–Ω -->
            <div class="drop-zone p-6 rounded-3xl flex flex-col" data-accept="date-kassym,ext-kassym,law-kassym">
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-12 h-12 bg-yellow-500/10 text-yellow-500 rounded-2xl flex items-center justify-center text-2xl shadow-inner">üëë</div>
                    <h3 class="font-black text-yellow-500 uppercase tracking-tighter">–ö–∞—Å—ã–º —Ö–∞–Ω</h3>
                </div>
                <div class="dropped-items space-y-3 flex-1">
                    <div class="slot-placeholder" data-type="date">–î–∞—Ç–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="slot-placeholder" data-type="ext">–í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="slot-placeholder" data-type="law">–ü—Ä–∞–≤–æ–≤—ã–µ —Ä–µ—Ñ–æ—Ä–º—ã</div>
                </div>
            </div>

            <!-- –•–∞–∫-–ù–∞–∑–∞—Ä —Ö–∞–Ω -->
            <div class="drop-zone p-6 rounded-3xl flex flex-col" data-accept="date-hakhnazar,ext-hakh,law-hakh">
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-12 h-12 bg-blue-500/10 text-blue-500 rounded-2xl flex items-center justify-center text-2xl">üõ°Ô∏è</div>
                    <h3 class="font-black text-blue-500 uppercase tracking-tighter text-sm">–•–∞–∫-–ù–∞–∑–∞—Ä —Ö–∞–Ω</h3>
                </div>
                <div class="dropped-items space-y-3 flex-1">
                    <div class="slot-placeholder" data-type="date">–î–∞—Ç–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="slot-placeholder" data-type="ext">–í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="slot-placeholder" data-type="law">–ü—Ä–∞–≤–æ–≤—ã–µ —Ä–µ—Ñ–æ—Ä–º—ã</div>
                </div>
            </div>

            <!-- –¢–∞—É–µ–∫–µ–ª—å —Ö–∞–Ω -->
            <div class="drop-zone p-6 rounded-3xl flex flex-col border-cyan-500/30" data-accept="date-tauelkel,ext-tauelkel,law-tauelkel">
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-12 h-12 bg-cyan-500/10 text-cyan-500 rounded-2xl flex items-center justify-center text-2xl">üèπ</div>
                    <h3 class="font-black text-cyan-500 uppercase tracking-tighter">–¢–∞—É–µ–∫–µ–ª—å —Ö–∞–Ω</h3>
                </div>
                <div class="dropped-items space-y-3 flex-1">
                    <div class="slot-placeholder" data-type="date">–î–∞—Ç–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="slot-placeholder" data-type="ext">–í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="slot-placeholder" data-type="law">–ü—Ä–∞–≤–æ–≤—ã–µ —Ä–µ—Ñ–æ—Ä–º—ã</div>
                </div>
            </div>

            <!-- –ï—Å–∏–º —Ö–∞–Ω -->
            <div class="drop-zone p-6 rounded-3xl flex flex-col" data-accept="date-esim,ext-esim,law-esim">
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-12 h-12 bg-red-500/10 text-red-500 rounded-2xl flex items-center justify-center text-2xl">‚öîÔ∏è</div>
                    <h3 class="font-black text-red-400 uppercase tracking-tighter text-sm">–ï—Å–∏–º —Ö–∞–Ω</h3>
                </div>
                <div class="dropped-items space-y-3 flex-1">
                    <div class="slot-placeholder" data-type="date">–î–∞—Ç–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="slot-placeholder" data-type="ext">–í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="slot-placeholder" data-type="law">–ü—Ä–∞–≤–æ–≤—ã–µ —Ä–µ—Ñ–æ—Ä–º—ã</div>
                </div>
            </div>

            <!-- –°–∞–ª–∫–∞–º –ñ–∞–Ω–≥–∏—Ä -->
            <div class="drop-zone p-6 rounded-3xl flex flex-col" data-accept="date-zhan,ext-zhan,law-zhan">
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-12 h-12 bg-orange-500/10 text-orange-500 rounded-2xl flex items-center justify-center text-2xl">üèîÔ∏è</div>
                    <h3 class="font-black text-orange-400 uppercase tracking-tighter text-sm">–°–∞–ª–∫–∞–º –ñ–∞–Ω–≥–∏—Ä</h3>
                </div>
                <div class="dropped-items space-y-3 flex-1">
                    <div class="slot-placeholder" data-type="date">–î–∞—Ç–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="slot-placeholder" data-type="ext">–í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="slot-placeholder" data-type="law">–ü—Ä–∞–≤–æ–≤—ã–µ —Ä–µ—Ñ–æ—Ä–º—ã</div>
                </div>
            </div>

            <!-- –¢–∞—É–∫–µ —Ö–∞–Ω -->
            <div class="drop-zone p-6 rounded-3xl flex flex-col" data-accept="date-tauke,ext-tauke,law-tauke">
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-12 h-12 bg-emerald-500/10 text-emerald-500 rounded-2xl flex items-center justify-center text-2xl">üìú</div>
                    <h3 class="font-black text-emerald-400 uppercase tracking-tighter">–¢–∞—É–∫–µ —Ö–∞–Ω</h3>
                </div>
                <div class="dropped-items space-y-3 flex-1">
                    <div class="slot-placeholder" data-type="date">–î–∞—Ç–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <div class="slot-placeholder" data-type="ext">–í–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞</div>
                    <div class="slot-placeholder" data-type="law">–ü—Ä–∞–≤–æ–≤—ã–µ —Ä–µ—Ñ–æ—Ä–º—ã</div>
                </div>
            </div>

            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤ -->
            <div class="p-6 rounded-3xl bg-yellow-500/10 border border-yellow-500/30 flex flex-col items-center justify-center text-center">
                <div class="text-4xl mb-4">üì¢</div>
                <h4 class="font-bold text-yellow-500 mb-2 uppercase text-xs tracking-widest">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h4>
                <p class="text-[13px] text-gray-300 leading-relaxed mb-3">–ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –≤—ã –æ–±—è–∑–∞–Ω—ã –ø—Ä–∏–≤–µ—Å—Ç–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã!</p>
                <div class="space-y-2 text-[10px] text-yellow-500 font-bold uppercase italic">
                    <p>‚Äî –î–æ–∫–∞–∂–∏—Ç–µ ¬´–ü–†–ï–ï–ú–°–¢–í–ï–ù–ù–û–°–¢–¨¬ª –ø–æ–ª–∏—Ç–∏–∫–∏</p>
                    <p>‚Äî –û–±—ä—è—Å–Ω–∏—Ç–µ ¬´–≠–¢–ê–ü –ì–û–°–£–î–ê–†–°–¢–í–ï–ù–ù–û–°–¢–ò¬ª</p>
                </div>
            </div>

        </main>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div id="toast" class="fixed top-6 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-6 py-3 rounded-full shadow-2xl opacity-0 transition-all pointer-events-none z-50 flex items-center gap-3 font-bold text-sm">
        <span>‚ùå –û—à–∏–±–∫–∞: —Ñ–∞–∫—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç —ç—Ç–æ–º—É –ø—Ä–∞–≤–∏—Ç–µ–ª—é!</span>
    </div>

    <script>
        const draggables = document.querySelectorAll('.draggable');
        const dropZones = document.querySelectorAll('.drop-zone');
        const toast = document.getElementById('toast');

        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', (e) => {
                draggable.classList.add('opacity-30');
                e.dataTransfer.setData('text/plain', draggable.dataset.id);
            });

            draggable.addEventListener('dragend', () => {
                draggable.classList.remove('opacity-30');
            });
        });

        dropZones.forEach(zone => {
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                zone.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', () => {
                zone.classList.remove('drag-over');
            });

            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('drag-over');
                
                const factId = e.dataTransfer.getData('text/plain');
                const acceptedIds = zone.dataset.accept.split(',');
                const draggableElement = document.querySelector(`[data-id="${factId}"]`);

                if (acceptedIds.includes(factId)) {
                    processPlacement(zone, draggableElement);
                } else {
                    showError();
                }
            });
        });

        function processPlacement(zone, element) {
            const type = element.dataset.type;
            const placeholder = zone.querySelector(`.slot-placeholder[data-type="${type}"]`);
            
            const card = document.createElement('div');
            card.className = `p-3 rounded-xl text-sm font-semibold bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 correct-drop`;
            card.innerHTML = element.innerHTML;
            
            if (placeholder) {
                placeholder.replaceWith(card);
            } else {
                zone.querySelector('.dropped-items').appendChild(card);
            }

            element.classList.add('pointer-events-none', 'opacity-10');
            element.setAttribute('draggable', 'false');
        }

        function showError() {
            toast.style.opacity = '1';
            toast.style.top = '2rem';
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.top = '1rem';
            }, 2000);
        }

        let touchItem = null;

        document.addEventListener('touchstart', (e) => {
            if (e.target.classList.contains('draggable')) {
                touchItem = e.target;
            }
        }, {passive: false});

        document.addEventListener('touchend', (e) => {
            if (!touchItem) return;
            
            const touch = e.changedTouches[0];
            const target = document.elementFromPoint(touch.clientX, touch.clientY);
            const zone = target ? target.closest('.drop-zone') : null;

            if (zone) {
                const factId = touchItem.dataset.id;
                if (zone.dataset.accept.split(',').includes(factId)) {
                    processPlacement(zone, touchItem);
                } else {
                    showError();
                }
            }
            touchItem = null;
        });
    </script>
</body>
</html>